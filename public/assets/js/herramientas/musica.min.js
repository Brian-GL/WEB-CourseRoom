async function ObtenerMetadatos(e){try{let t=await axios({url:"/herramientas/metadatos",baseURL:BaseURL,method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector("[name~=csrf-token][content]").content},data:{Busqueda:e}}),a=t.data;switch(a.code){case 200:{let e=a.data;ObtenerVideo(e.Titulo,e.Artista),document.getElementById("caratula").src=e.Caratula,document.getElementById("informacion-cancion").innerText=e.Titulo,document.getElementById("nombre-artista").innerText="By ".concat(e.Artista),document.getElementById("deezer").href=e.DeezerURL}break;case 500:document.getElementById("caratula").src="",document.getElementById("informacion-cancion").innerText=e,document.getElementById("nombre-artista").innerText="Desconocido",document.getElementById("deezer").href="https://www.deezer.com",document.getElementById("video-frame").src="",Swal.fire({title:"¡Error!",text:a.data,imageUrl:BaseURL.concat("/assets/templates/SadOwl.png"),imageWidth:100,imageHeight:123,background:"#000000",color:"#FFFFFF",imageAlt:"Error Image"});break;default:document.getElementById("caratula").src="",document.getElementById("informacion-cancion").innerText=e,document.getElementById("nombre-artista").innerText="Desconocido",document.getElementById("deezer").href="https://www.deezer.com",document.getElementById("video-frame").src=""}}catch(t){document.getElementById("caratula").src="",document.getElementById("informacion-cancion").innerText=e,document.getElementById("nombre-artista").innerText="Desconocido",document.getElementById("deezer").href="https://www.deezer.com",document.getElementById("video-frame").src="",Swal.fire({title:"¡Error!",text:t,imageUrl:BaseURL.concat("/assets/templates/SadOwl.png"),imageWidth:100,imageHeight:123,background:"#000000",color:"#FFFFFF",imageAlt:"Error Image"})}}async function ObtenerVideo(e,t){let a=t.concat(" - ",e);try{let e=await axios({url:"/herramientas/multimedia",baseURL:BaseURL,method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector("[name~=csrf-token][content]").content},data:{Busqueda:a,Artista:t}}),n=e.data;switch(n.code){case 200:{let e="https://www.youtube.com/embed/".concat(n.data.Id,"?controls=0&rel=0&autoplay=1&mute=1&disablekb=1&modestbranding=1&showinfo=0");document.getElementById("video-frame").src=e}break;case 500:default:Swal.fire({title:"¡Error!",html:n.data,imageUrl:baseURL.concat("/assets/templates/SadOwl.png"),imageWidth:100,imageHeight:123,background:"#000000",color:"#FFFFFF",imageAlt:"Error Image"}),document.getElementById("video-frame").src=""}}catch(e){document.getElementById("video-frame").src="",Swal.fire({title:"¡Error!",html:e,imageUrl:baseURL.concat("/assets/templates/SadOwl.png"),imageWidth:100,imageHeight:123,background:"#000000",color:"#FFFFFF",imageAlt:"Error Image"})}}function loadTrack(e){if(music_list.length>0){clearInterval(updateTimer),reset();let t=music_list[e];curr_track.src=t.Ruta,ObtenerMetadatos(t.NombreArchivo),playTrack(),document.getElementById("slider").setAttribute("min",0),curr_track.addEventListener("ended",pistaSiguiente),updateTimer=setInterval(setUpdate,1e3),setTimeout(function(){let e=parseInt(curr_track.duration);document.getElementById("slider").setAttribute("max",e);let t=parseInt(e/60),a=parseInt(e-60*t);a="0".concat(a).slice(-2),t="0".concat(t).slice(-2),document.getElementById("duracion").innerText=t.concat(":",a)},1e3)}}function reset(){document.getElementById("progreso").innerText="00:00",document.getElementById("duracion").innerText="00:00",document.getElementById("slider").value=0}async function playTrack(){!1===document.getElementById("play-pause").disabled&&(await curr_track.play(),isPlaying=!0,document.getElementById("slider").disabled=!1,document.getElementById("play-pause").classList.replace("fa-play-circle","fa-pause-circle"))}function pauseTrack(){!1===document.getElementById("play-pause").disabled&&(curr_track.pause(),isPlaying=!1,document.getElementById("slider").disabled=!0,document.getElementById("play-pause").classList.replace("fa-pause-circle","fa-play-circle"))}function pistaSiguiente(){if(!1===document.getElementById("siguiente").disabled){if(track_index<music_list.length-1)track_index+=1;else if(track_index<music_list.length-1){let e=Number.parseInt(Math.random()*music_list.length);track_index=e}else track_index=0;loadTrack(track_index)}}function setUpdate(){if(!isNaN(curr_track.duration)){let e=parseInt(curr_track.currentTime),t=parseInt(e/60),a=parseInt(e-60*t);a="0".concat(a).slice(-2),t="0".concat(t).slice(-2),document.getElementById("progreso").innerText=t.concat(":",a),document.getElementById("slider").value=e}}var track_index,isPlaying,updateTimer,music_list,curr_track=document.createElement("audio");let BaseURL=window.location.origin;document.getElementById("slider").disabled=!0,document.getElementById("anterior").disabled=!0,document.getElementById("play-pause").disabled=!0,document.getElementById("siguiente").disabled=!0,track_index=0,isPlaying=!1,music_list=[],document.getElementById("fileUpload").addEventListener("change",e=>{ShowPreloader(),track_index=0;let t=window.URL||window.webkitURL;if(!t)return preloader.hidden=!0,void alert("Your browser does not support Blob URL!");music_list.forEach(e=>{URL.revokeObjectURL(e.Ruta)}),music_list=[],document.getElementById("anterior").disabled=!1,document.getElementById("play-pause").disabled=!1,document.getElementById("siguiente").disabled=!1;let a,n,r=e.target.files;for(let e of r)a=t.createObjectURL(e),n=e.name.replace(/\.[^/.]+$/,""),music_list.push({Ruta:a,NombreArchivo:n});HidePreloader(),loadTrack(track_index)}),document.getElementById("open-files").addEventListener("click",e=>{document.getElementById("fileUpload").click()}),document.getElementById("play-pause").addEventListener("click",e=>{isPlaying?pauseTrack():playTrack()}),document.getElementById("siguiente").addEventListener("click",e=>{pistaSiguiente()}),document.getElementById("anterior").addEventListener("click",e=>{!1===e.target.disabled&&(track_index>0?track_index-=1:track_index=music_list.length-1,loadTrack(track_index))}),document.getElementById("slider").addEventListener("change",e=>{let t=parseInt(e.target.value),a=parseInt(t/60),n=parseInt(t-60*a);n="0".concat(n).slice(-2),a="0".concat(a).slice(-2),document.getElementById("progreso").innerText=a.concat(":",n),curr_track.currentTime=t});